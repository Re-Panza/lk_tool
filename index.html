<!DOCTYPE html>
<html lang="it">
<head>
  <link rel="manifest" href="manifest.json">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="L&K Tools">
<link rel="apple-touch-icon" href="icona.png">

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta charset="utf-8" />
  <title>L&K Tools Hub | Re Panza</title>
  <style>
    #ai-assistant-container { position: fixed; bottom: 20px; right: 20px; z-index: 9999; font-family: sans-serif; }
#ai-button { 
    width: 70px; /* Un po' pi√π grande per l'immagine */
    height: 70px; 
    border-radius: 50%; 
    background: var(--accent); 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    cursor: pointer; 
    box-shadow: 0 4px 15px rgba(0,0,0,0.4); 
    overflow: hidden; /* Taglia l'immagine se esce dal cerchio */
    border: 2px solid var(--accent);
}

#ai-button img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Adatta bene l'omino al cerchio */
}
#ai-window { 
    display: none; 
    position: absolute; 
    bottom: 85px; 
    right: 0; 
    width: 85vw; 
    max-width: 320px; 
    background: var(--card); 
    border: 1px solid var(--accent); 
    border-radius: 20px; 
    padding: 15px; 
    box-shadow: 0 10px 30px rgba(0,0,0,0.6); 
    backdrop-filter: blur(10px);
}
.ai-header { color: var(--accent); font-weight: bold; margin-bottom: 10px; display: flex; justify-content: space-between; border-bottom: 1px solid var(--border); padding-bottom: 5px; }
#ai-content { max-height: 300px; overflow-y: auto; margin-bottom: 10px; }
.ai-msg { font-size: 13px; color: var(--text); margin-bottom: 10px; line-height: 1.4; background: rgba(255,255,255,0.05); padding: 8px; border-radius: 8px; }
.ai-option { background: transparent; border: 1px solid var(--accent); color: var(--accent); padding: 6px 10px; border-radius: 20px; margin-bottom: 6px; cursor: pointer; font-size: 11px; display: inline-block; margin-right: 5px; transition: 0.2s; }
.ai-option:hover { background: var(--accent); color: #000; }
.ai-input-area { display: flex; gap: 5px; border-top: 1px solid var(--border); padding-top: 10px; }
#ai-input-text { flex: 1; background: #000; border: 1px solid var(--border); color: #fff; border-radius: 5px; padding: 5px; font-size: 12px; }
#ai-send-btn { background: var(--accent); border: none; border-radius: 5px; padding: 5px 10px; cursor: pointer; font-size: 12px; }
    :root {
      --bg: #0f172a;
      --card: #111c33;
      --accent: #60a5fa;
      --text: #e8eefc;
      --muted: #93a4c7;
      --border: rgba(255, 255, 255, 0.1);
      --success: #34d399;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, sans-serif;
      background: radial-gradient(circle at top right, rgba(96,165,250,0.12), transparent 50%), 
                  radial-gradient(circle at bottom left, rgba(52,211,153,0.08), transparent 50%),
                  var(--bg);
      color: var(--text);
      display: flex;
      align-items: flex-start;
      justify-content: center;
      min-height: 100vh;
      padding: 40px 20px;
    }

    .container {
      max-width: 480px;
      width: 100%;
      text-align: center;
    }

    header { margin-bottom: 40px; }
    h1 { font-size: 32px; margin: 0; letter-spacing: -1px; background: linear-gradient(to right, #fff, var(--accent)); -webkit-background-clip: text; -webkit-fill-color: transparent; -webkit-text-fill-color: transparent; }
    p { color: var(--muted); margin-top: 8px; font-size: 16px; }

    .grid { display: flex; flex-direction: column; gap: 20px; }

    .tool-card {
      background: rgba(17, 28, 51, 0.6);
      border: 1px solid var(--border);
      padding: 24px;
      border-radius: 24px;
      text-decoration: none;
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 20px;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      backdrop-filter: blur(10px);
    }

    .tool-card:hover {
      border-color: var(--accent);
      transform: translateY(-5px) scale(1.02);
      background: rgba(96, 165, 250, 0.1);
      box-shadow: 0 20px 40px rgba(0,0,0,0.4);
    }

    .icon-box {
      width: 56px;
      height: 56px;
      background: rgba(96, 165, 250, 0.15);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 26px;
      color: var(--accent);
      flex-shrink: 0;
    }

    .tool-info { text-align: left; }
    .tool-info b { display: block; font-size: 19px; margin-bottom: 4px; color: #fff; }
    .tool-info span { color: var(--muted); font-size: 14px; line-height: 1.4; display: block; }

    .paypal-footer {
        margin-top: 60px;
        padding-top: 25px;
        border-top: 1px solid var(--border);
    }
    .paypal-link {
        color: #fff;
        text-decoration: none;
        font-weight: bold;
        font-size: 14px;
        background: #0070ba;
        padding: 12px 28px;
        border-radius: 50px;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        transition: 0.3s;
        box-shadow: 0 4px 15px rgba(0, 112, 186, 0.3);
    }
    
    body {
        -webkit-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
    }

    .tool-card:active, .paypal-link:active {
        transform: scale(0.96);
        background: rgba(96, 165, 250, 0.2);
    }
  </style>
</head>
<body>

<div class="container">
    <header>
        <h1>‚öîÔ∏è L&K Tools Hub</h1>
        <p>Semplifica la tua strategia di conquista</p>
    </header>

    <div class="grid">
        <a href="https://re-panza.github.io/ricerca_giocatori/" class="tool-card">
            <div class="icon-box">üîç</div>
            <div class="tool-info">
                <b>Ricerca Giocatore</b>
                <span>Trova tutti i castelli di un giocatore incollando il suo profilo.</span>
            </div>
        </a>

        <a href="https://re-panza.github.io/calcolo-partenze/" class="tool-card">
            <div class="icon-box">üéØ</div>
            <div class="tool-info">
                <b>Calcola Partenze Attaccanti</b>
                <span>Scannerizza i link L&K e calcola gli orari di partenza.</span>
            </div>
        </a>

        <a href="https://re-panza.github.io/calcola_argento/" class="tool-card">
            <div class="icon-box">üí∞</div>
            <div class="tool-info">
                <b>Calcolo Argento</b>
                <span>Calcola la quantit√† di argento necessaria per conquistare i tuoi target.</span>
            </div>
        </a>
    </div>

    <footer class="paypal-footer">
        <p style="font-size:12px; color:var(--muted); margin-bottom:15px;">Sviluppato da Re Panza</p>
        <p style="font-size:12px; color:var(--muted); margin-bottom:15px;">Imperial Wolves Server Regioni Ita VI</p>
        <p style="font-size:12px; color:var(--muted); margin-bottom:15px;">Jamaican Peace Server Ita 15</p>
        <a href="https://paypal.me/Longo11" target="_blank" class="paypal-link">
            ‚òï Offrimi un caff√® su PayPal
        </a>
    </footer>
</div>

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('sw.js').then(reg => {
      reg.update();
      reg.onupdatefound = () => {
        const newWorker = reg.installing;
        newWorker.onstatechange = () => {
          if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
            window.location.reload();
          }
        };
      };
    });
  });
}
function toggleAI() {
    const win = document.getElementById('ai-window');
    win.style.display = win.style.display === 'block' ? 'none' : 'block';
    if (win.style.display === 'block' && window.innerWidth < 768) {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
}

function resetAI() {
    document.getElementById('ai-content').innerHTML = `
        <p class="ai-msg">üëë Ciao! Sono Re Panza. Come posso aiutarti oggi a dominare il server?</p>
        <div class="ai-option" onclick="aiAnswer(1)">üîç Ricerca Giocatore</div>
        <div class="ai-option" onclick="aiAnswer(5)">üéØ Calcolo Partenze</div>
        <div class="ai-option" onclick="aiAnswer(6)">üí∞ Calcolo Argento</div>
        <div class="ai-option" onclick="aiAnswer(4)">üõ†Ô∏è Parla con me su Telegram (@giolong)</div>
    `;
}

function aiAnswer(choice) {
    const content = document.getElementById('ai-content');
    let ans = "";
    if (choice === 1) ans = "Usa 'Ricerca Giocatore' per spiare i nemici! Incolla il profilo copiato dal gioco e ti mostrer√≤ tutti i suoi castelli e citt√†.";
    if (choice === 5) ans = "Il tool 'Partenze' serve per sincronizzare gli attacchi. Ti dir√≤ io il secondo esatto in cui cliccare 'Invia'!";
    if (choice === 6) ans = "Il 'Calcolo Argento' ti dice quanto argento inviare per conquistare un target senza sprecare risorse.";
    if (choice === 4) ans = "Hai bisogno di aiuto diretto? Clicca qui: <a href='https://t.me/giolong' target='_blank' style='color:var(--accent); font-weight:bold;'>Apri Telegram</a>";

    addAiMsg(ans);
    content.innerHTML += `<div class="ai-option" onclick="resetAI()" style="margin-top:10px; opacity:0.7;">‚¨ÖÔ∏è Indietro</div>`;
}

function addAiMsg(text) {
    const content = document.getElementById('ai-content');
    content.innerHTML += `<p class="ai-msg">üëë ${text}</p>`;
    content.scrollTop = content.scrollHeight;
}

function aiFreeText() {
    const input = document.getElementById('ai-input-text');
    const txt = input.value.toLowerCase();
    if (txt.trim() === "") return;
    document.getElementById('ai-content').innerHTML += `<p class="ai-msg" style="background:var(--accent); color:#000; text-align:right;">${input.value}</p>`;
    
    setTimeout(() => {
        if (txt.includes("argento")) addAiMsg("Il calcolo argento √® il terzo bottone nella home!");
        else if (txt.includes("partenza") || txt.includes("attacco")) addAiMsg("Usa il tool Partenze per coordinare i tuoi attacchi al secondo!");
        else if (txt.includes("ricerca") || txt.includes("trova")) addAiMsg("Il tool Ricerca Giocatore serve per trovare le coordinate dei nemici.");
        else if (txt.includes("ciao")) addAiMsg("Ciao guerriero! Pronto per la conquista?");
        else addAiMsg("Non ho capito bene... prova a scrivermi su Telegram @giolong!");
    }, 600);
    input.value = "";
}

// Permette di inviare premendo INVIO sulla tastiera
document.getElementById('ai-input-text')?.addEventListener("keypress", function(e) {
    if (e.key === "Enter") aiFreeText();
});
</script>
<div id="ai-assistant-container">
    <div id="ai-window">
        <div class="ai-header">
            <span>üëë Assistente Re Panza</span>
            <span onclick="toggleAI()" style="cursor:pointer">√ó</span>
        </div>
        <div id="ai-content">
            <p class="ai-msg">Ciao! Sono Re Panza. Come posso aiutarti oggi nella tua conquista?</p>
            <div class="ai-option" onclick="aiAnswer(1)">‚ùì Come si usa?</div>
            <div class="ai-option" onclick="aiAnswer(2)">‚ùå Errore Rosso</div>
            <div class="ai-option" onclick="aiAnswer(4)">üõ†Ô∏è Parla con me su Telegram</div>
        </div>
        <div class="ai-input-area">
            <input type="text" id="ai-input-text" placeholder="Scrivi al Re...">
            <button id="ai-send-btn" onclick="aiFreeText()">Invia</button>
        </div>
    </div>
    <div id="ai-button" onclick="toggleAI()">
        <img src="re-panza-ai.png" alt="Re Panza AI">
    </div>
</div>
</body>
</html>

